<!DOCTYPE html>
<html>
	<head></head>
	<body>
	
		<script>
			var circuit = [
				["M","-","-","-","-","-","-","-","-","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," ","V"," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," "," "," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"],
				["O"," "," "," "," "," "," ",""," ","O"],
				["M"," "," "," "," "," "," "," "," ","M"]
			];
			var y= 0;
			for (var i = 0; i < circuit.length- 1; i++){	
				if(circuit[i].indexOf("V") != -1){
					y = i;
				}
			};
			function AfficheMap(map){
				//vérifier map
				if(Array.isArray(map) == false){
					console.error("crash de la fonction");
				}else{
				//afficher les couleurs
					var Chaine = "";
					var map_couleur = [];
					if (y >15){
						for (var i = y - 15; i <= y; i++){
							for(var j = 0; j < map[i].length; j++){
								if(map[i][j] == "M"){
									map_couleur.push("background: #000");
								}else if(map[i][j] == " "){
									map_couleur.push("background: #00ff00");
								}else if(map[i][j] == "O"){
									map_couleur.push("background: #A00");
								}else if(map[i][j] == "V"){
									map_couleur.push("background: #555FFF");
								}else if(map[i][j] == "-"){
									map_couleur.push("background: #AFF0FF");
								}else if(map[i][j] == "X"){
									map_couleur.push("background: red");
								}else{
									return "crash de la fonction sur la case "+map[i][j];
								}
								Chaine += '%c   ';
							}
							Chaine += '\n';
						}		
					}else{
						for (var i = 0; i <15; i	++){
							for(var j = 0; j < map[i].length; j++){
								if(map[i][j] == "M"){
									map_couleur.push("background: #000");
								}else if(map[i][j] == " "){
									map_couleur.push("background: #00ff00");
								}else if(map[i][j] == "O"){
									map_couleur.push("background: #A00");
								}else if(map[i][j] == "V"){
									map_couleur.push("background: #555FFF");
								}else if(map[i][j] == "-"){
									map_couleur.push("background: #AFF0FF");
								}else if(map[i][j] == "X"){
									map_couleur.push("background: red");
								}else{
									return "crash de la fonction sur la case "+map[i][j];
								}
								Chaine += '%c   ';
							}
							Chaine += '\n';
						}		
					}
					console.log(Chaine, ...map_couleur);
					return "La map a été affichée correctement";
				}
				
			}
				
			setTimeout(Jouer,  250);
			
			function Jouer(  ){
		
				AfficheMap(circuit);
							
				for (var i = 0; i < circuit.length; i++){
										
					if (circuit[i].indexOf("V") != -1) {	
					
						var save = circuit[i].indexOf("V");
							
						if (circuit[i-1] == undefined){	
							console.log("Vous etes arrivé");
							return "Bravo";
						}else{
							circuit[i][save] = " ";
							circuit[i -1][save] = "V";	
							y--;
						}
									
					setTimeout(Jouer,  250);
				}
			}
		}
		
		</script>
		
	</body>
</html>